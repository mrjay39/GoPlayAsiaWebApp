@page "/Credit"
@page "/Credit/transactions"
@page "/Credit/withdraw"
@using GoPlayAsiaWebApp.Goplay.Games.Shared
@using GoPlayAsiaWebApp.Shared
@using GoplayasiaBlazor.Models
@using GoPlayAsiaWebApp.Goplay.Reports.Transaction
@using GoPlayAsiaWebApp.Goplay.Transactions.AddCredit
@using GoPlayAsiaWebApp.Goplay.Transactions.Withdraw
@inject NavigationManager MyNavigationManager
@implements IAsyncDisposable
@attribute [Authorize(Roles = "1")]

<PageTitle>GoPlayAsia: User's Wallet</PageTitle>
<div class="container-fluid marketing pt-4">
    @* <TopContent CreditsDisp="@_mainCreditsViewModel._icurrentUser.CreditsDisp" /> *@
    @if (_mainCreditsViewModel.UserParentDtl != null)
    {
        <div class="row pt-3 pb-3">
            <div class="container-fluid pt-2 pb-4 bg-white mt-4 rounded-3 justify-content-center" style="width: 48rem;">

                <div id="wallet-headerIcon" class="container-fluid p-0 mb-5">
                    <ul class="nav nav-tabs border-0 justify-content-center" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link p-0 @activeaddcredit cashIn" id="cashIn-tab" data-bs-toggle="tab" data-bs-target="#cashIn-tab-pane" role="tab" aria-controls="cashIn-tab-pane" aria-selected="true" @onclick:preventDefault @onclick='(() => getUserInfo(1))'>
                                <div class="card border-0 text-center p-0 wallet-cardContainer">
                                    <div class="icon-link icon-link-hover text-decoration-none">
                                        <img class="img-fluid img" src="/img/cash-in.png" style="width: 3rem;" />
                                        <div class="card-body p-0">
                                            <h6 class="card-title text-black mb-0">Cash-In</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link p-0 @activewithdraw cashOut" id="cashOut-tab" @onclick:preventDefault @onclick='(() => getUserInfo(2))' data-bs-toggle="tab" data-bs-target="#cashOut-tab-pane" role="tab" aria-controls="cashOut-tab-pane" aria-selected="false">
                                <div class="card border-0 text-center p-0 wallet-cardContainer">
                                    <div class="icon-link icon-link-hover text-decoration-none">
                                        <img class="img-fluid img" src="/img/cash-out.png" style="width: 3rem;" />
                                        <div class="card-body p-0">
                                            <h6 class="card-title text-black mb-0">Cash-Out</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link p-0 @activetransaction" id="transaction-tab" @onclick:preventDefault @onclick='(() => GetTransactionsByUserId())' data-bs-toggle="tab" data-bs-target="#transaction-tab-pane" role="tab" aria-controls="transaction-tab-pane" aria-selected="false">
                                <div class="card border-0 text-center p-0 wallet-cardContainer">
                                    <div class="icon-link icon-link-hover text-decoration-none">
                                        <img class="img-fluid img" src="/img/trans-history.png" style="width: 3rem;" />
                                        <div class="card-body p-0">
                                            <h6 class="card-title mb-0 text-black">Transactions</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="tab-content" id="myTabContent">
                    @if (@activeaddcredit == "active")
                    {
                        <div class="tab-pane fade  show active" id="cashIn-tab-pane" role="tabpanel" aria-labelledby="cashIn-tab" tabindex="0">
                            <AddCredits />
                        </div>
                    }
                    @if (@activewithdraw == "active")
                    {
                        <div class="tab-pane fade show active" id="cashOut-tab-pane" role="tabpanel" aria-labelledby="cashOut-tab" tabindex="0">
                            <Withdraw UserInfo="@_mainCreditsViewModel.UserInfo" />
                        </div>
                    }
                    @if (@activetransaction == "active")
                    {
                        <div class="tab-pane fade show active" id="transaction-tab-pane" role="tabpanel" aria-labelledby="transaction-tab" tabindex="0">
                            <Transaction />
                        </div>
                    }
                </div>
            </div>
        </div>
    }
    else
    {
        <LoadingScreen />
    }
</div>



@* <div class="container marketing">
    <TopContent CreditsDisp="@_mainCreditsViewModel._icurrentUser.CreditsDisp" />
    @if (_mainCreditsViewModel.UserParentDtl != null)
    {
        <section>
            <ul class="nav nav-tabs mt-5 justify-content-center text-center creditsNav" id="myTab" role="tablist">
                <li class="nav-item w-100 col m-0 p-0">
                    <a class="nav-link p-1 @activeaddcredit cashIn-icon"
                       id="AddCredit-tab"
                       data-toggle="tab"
                       href="#AddCredit"
                       role="tab"
                       aria-controls="AddCredit-tab"
                       aria-selected="true"><span>CASH-IN</span></a>
                </li>
                <li class="nav-item w-100 col text-center m-0 p-0">
                    <a class="nav-link  p-1 cashOut-icon" id="withdraw-tab" data-toggle="tab"
                       href="#withdraw" @onclick:preventDefault @onclick='(() => getUserInfo())'
                       role="tab" aria-controls="withdraw-tab" aria-selected="true">
                        <span>CASH-OUT</span>
                    </a>
                </li>
                <li class="nav-item w-100 col text-center m-0 p-0">
                    <a class="nav-link  p-1 @activetransaction trans-icon" id="transaction-tab"
                       data-toggle="tab" href="#transaction" role="tab" aria-controls="transaction-tab"
                       aria-selected="true" @onclick:preventDefault @onclick='(() => GetTransactionsByUserId())'>
                        <span>TRANSACTIONS</span>
                    </a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane @activeaddcredit" id="AddCredit" role="tabpanel" aria-labelledby="AddCredit-tab">
                    <AddCredits />
                </div>

                <div class="tab-pane @activewithdraw" id="withdraw" role="tabpanel" aria-labelledby="withdraw-tab">
                    <Withdraw />
                </div>

                <div class="tab-pane show @activetransaction" id="transaction" role="tabpanel" aria-labelledby="transaction-tab">
                    <Transaction />
                </div>
            </div>
        </section>

    }
    else
    {
        <LoadingScreen />
    }
</div> *@