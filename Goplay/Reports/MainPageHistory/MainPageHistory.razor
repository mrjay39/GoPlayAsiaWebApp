@page "/bethistory"
@using GoPlayAsiaWebApp.Goplay.Games.Shared
@using GoPlayAsiaWebApp.Goplay.Reports.BetHistory
@using GoPlayAsiaWebApp.Goplay.Reports.Statistics
@using GoPlayAsiaWebApp.Goplay.ViewModels;
@using GoPlayAsiaWebApp.Goplay.ViewModels
@implements IAsyncDisposable
@inject MainPageHistoryViewModel _mainPageHistoryViewModel;
@attribute [Authorize(Roles = "1")]

<div class="container">
    <TopContent CreditsDisp="@_mainPageHistoryViewModel._icurrentUser.CreditsDisp" />
    <div class="mainContainer mt-3 ">
        <nav class="container-fluid p-0">
            <ul class="nav nav-tabs nav-fill mb-3" id="ex1" role="tablist">
                <li class="betHisBtn nav-item" role="presentation">
                    <a @onclick:preventDefault @onclick="@SetBetHistoryVisible" 
                       class="nav-link @ActiveHistory"
                       id="ex2-tab-1"
                       data-mdb-toggle="tab"
                       role="tab"
                       aria-controls="BetHistory"
                       aria-selected="true">BET HISTORY</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a @onclick:preventDefault @onclick="@SetStatisticsVisible" class="nav-link @ActiveStatistics"
                       id="ex2-tab-2"
                       data-mdb-toggle="tab"
                       href="Statistics"
                       role="tab"
                       aria-controls="Statistics"
                       aria-selected="false">STATISTICS</a>
                </li>
            </ul>
            <!-- Tabs navs -->
        </nav>
    </div>

    @if(@HistoryVisible){
        <CompBetHistory />
    }else if(@StatisticsVisible){
        <Statistics/>
    }
</div>
<NavMenuBar/>

@code {
    public Boolean HistoryVisible = true;
    public Boolean StatisticsVisible = false;
    public String ActiveHistory= "active";
    public String ActiveStatistics= "";

    public void SetBetHistoryVisible(){
        HistoryVisible = true;
        StatisticsVisible = false;
        ActiveHistory = "active";
        ActiveStatistics= "";
    }
    public void SetStatisticsVisible(){
        HistoryVisible = false;
        StatisticsVisible = true;
        ActiveHistory = "";
        ActiveStatistics= "active";
    }
    public async ValueTask DisposeAsync()
    {
       // await _mainPageHistoryViewModel.DisconnectSignalR();
    }
}


