@page "/Credit"
@page "/Credit/transactions"
@page "/Credit/withdraw"
@using GoPlayAsiaWebApp.Games.Shared
@using GoplayasiaBlazor.Models
@using GoPlayAsiaWebApp.Reports.Transaction
@using GoPlayAsiaWebApp.Transactions.AddCredit
@using GoPlayAsiaWebApp.Transactions.Withdraw
@inject NavigationManager MyNavigationManager
@implements IAsyncDisposable
@attribute [Authorize(Roles = "1")]
<div class="container">
    <TopContent CreditsDisp="@_mainCreditsViewModel._icurrentUser.CreditsDisp" />
    @if (_mainCreditsViewModel.UserParentDtl != null)
    {
        <section>
            <ul class="nav nav-tabs mt-5 justify-content-center text-center creditsNav" id="myTab" role="tablist">
                <li class="nav-item w-100 col m-0 p-0">
                    <a class="nav-link p-1 @activeaddcredit cashIn-icon"
                       id="AddCredit-tab"
                       data-toggle="tab"
                       href="#AddCredit"
                       role="tab"
                       aria-controls="AddCredit-tab"
                       aria-selected="true"><span>CASH-IN</span></a>
                </li>
                <li class="nav-item w-100 col text-center m-0 p-0">
                    <a class="nav-link  p-1 cashOut-icon" id="withdraw-tab" data-toggle="tab"
                       href="#withdraw" @onclick:preventDefault @onclick='(() => getUserInfo())'
                       role="tab" aria-controls="withdraw-tab" aria-selected="true"><span>CASH-OUT</span>
                   </a>
                </li>
                <li class="nav-item w-100 col text-center m-0 p-0">
                    <a class="nav-link  p-1 @activetransaction trans-icon" id="transaction-tab"
                       data-toggle="tab" href="#transaction" role="tab" aria-controls="transaction-tab"
                       aria-selected="true" @onclick:preventDefault @onclick='(() => GetTransactionsByUserId())'><span>TRANSACTIONS</span>
                   </a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane @activeaddcredit" id="AddCredit" role="tabpanel" aria-labelledby="AddCredit-tab">
                    <AddCredits />
                </div>

                <div class="tab-pane @activewithdraw" id="withdraw" role="tabpanel" aria-labelledby="withdraw-tab">
                    <Withdraw />
                </div>

                <div class="tab-pane show @activetransaction" id="transaction" role="tabpanel" aria-labelledby="transaction-tab">
                    <Transaction />
                </div>
            </div>
        </section>

    }
    else
    {
        <LoadingScreen />
    }
</div>


<NavMenuBar />
@code {

}
